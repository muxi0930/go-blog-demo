<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
	<title>æµ‹è¯• - layui</title>
	<link rel="stylesheet" href="layui/css/layui.css">
	<script src="layui/axios.min.js"></script>
</head>

<body>

	<div class="layui-container" style="margin: 30px 0 30px;">
		<fieldset class="layui-elem-field layui-field-title" style="margin-top: 20px;">
			<legend>ğŸ‘´è€å¤´ä¹ğŸ‘´</legend>

		</fieldset>
		<button class="layui-btn layui-btn-primary layui-border-black" style="float:right" id="add_user">æ·»åŠ è€å¤´ğŸ‘´</button>
		<div class="layui-row">
			<div class="layui-col-xs12 layui-col-md8">
				<table class="layui-hide" id="user_table" , lay-filter="table_lay_filter"></table>
			</div>
			<div class="layui-col-xs6 layui-col-md4">
				<!-- <div class="layui-panel">
					<div style="padding: 50px 30px;">
					</div>
				</div> -->
			</div>
		</div>
	</div>

	<!-- å¼•å…¥ layui.js çš„ <script> æ ‡ç­¾æœ€å¥½æ”¾ç½®åœ¨ html æœ«å°¾ -->
	<script src="layui/layui.js"></script>
	<script>
		layui.use(function () {
			var layer = layui.layer
				, form = layui.form
				, laypage = layui.laypage
				, element = layui.element
				, laydate = layui.laydate
				, util = layui.util;

			//æ¬¢è¿ä¿¡æ¯
			layer.msg('Hello World');

			//è¾“å‡ºç‰ˆæœ¬å·
			lay('#version').html(layui.v);

			//æ—¥æœŸ
			laydate.render({
				elem: '#test2'
				, value: new Date()
				, isInitValue: true
			});

			//è§¦å‘äº‹ä»¶
			util.event('test-active', {
				'test-form': function () {
					layer.open({
						type: 1
						, resize: false
						, shadeClose: true
						, area: '350px'
						, title: 'layer + form'
						, content: ['<ul class="layui-form layui-form-pane" style="margin: 15px;">'
							, '<li class="layui-form-item">'
							, '<label class="layui-form-label">è¾“å…¥æ¡†</label>'
							, '<div class="layui-input-block">'
							, '<input class="layui-input" lay-verify="required" name="field1">'
							, '</div>'
							, '</li>'
							, '<li class="layui-form-item">'
							, '<label class="layui-form-label">é€‰æ‹©æ¡†</label>'
							, '<div class="layui-input-block">'
							, '<select name="field2">'
							, '<option value="A">A</option>'
							, '<option value="B">B</option>'
							, '<select>'
							, '</div>'
							, '</li>'
							, '<li class="layui-form-item" style="text-align:center;">'
							, '<button type="submit" lay-submit lay-filter="*" class="layui-btn">æäº¤</button>'
							, '</li>'
							, '</ul>'].join('')
						, success: function (layero, index) {
							layero.find('.layui-layer-content').css('overflow', 'visible');

							form.render().on('submit(*)', function (data) {
								layer.msg(JSON.stringify(data.field), { icon: 1 });
								//layer.close(index); //å…³é—­å±‚
							});
						}
					});
				}
			});
		});
		layui.use('table', function () {
			var $ = layui.$
			var table = layui.table;
			table.render({
				elem: '#user_table'
				, url: '/api/v1/staffs'
				, page: { //æ”¯æŒä¼ å…¥ laypage ç»„ä»¶çš„æ‰€æœ‰å‚æ•°ï¼ˆæŸäº›å‚æ•°é™¤å¤–ï¼Œå¦‚ï¼šjump/elemï¼‰ - è¯¦è§æ–‡æ¡£
					layout: ['count', 'prev', 'page', 'next', 'skip'] //è‡ªå®šä¹‰åˆ†é¡µå¸ƒå±€ 'limit'
					//,curr: 5 //è®¾å®šåˆå§‹åœ¨ç¬¬ 5 é¡µ
					, groups: 1 //åªæ˜¾ç¤º 1 ä¸ªè¿ç»­é¡µç 
					, first: false //ä¸æ˜¾ç¤ºé¦–é¡µ
					, last: false //ä¸æ˜¾ç¤ºå°¾é¡µ

				}
				, cols: [[
					{ field: 'ID', width: 80, title: 'ID'}
					, { field: 'name', title: 'å§“å' }
					, { field: 'sex', width: 80, title: 'æ€§åˆ«', sort: true }
				]]
			});
			// è¡Œäº‹ä»¶
			table.on('row(table_lay_filter)', function (obj) {
				layer.open({
					title: 'è€å¤´ä»‹ç»'
					, type: 2
					, content: 'info.html?id=' + obj.data.ID
					, area: ['', '400px']
				});

				//æ ‡æ³¨é€‰ä¸­æ ·å¼
				obj.tr.addClass('layui-table-click').siblings().removeClass('layui-table-click');
				// console.log(obj.tr) //å¾—åˆ°å½“å‰è¡Œå…ƒç´ å¯¹è±¡
				// console.log(obj.data) //å¾—åˆ°å½“å‰è¡Œæ•°æ®
				//obj.update(fields) //ä¿®æ”¹å½“å‰è¡Œæ•°æ®
			});

			//add_useræŒ‰é’®è·³è½¬äº‹ä»¶
			lay('#add_user').on('click', function () {
				layer.open({
					title: 'æ·»åŠ è€å¤´'
					, type: 2
					, content: 'create.html'
					, area: ['100%', '500px']
				});
			});
		});
	</script>
</body>

</html>